import{p as e,a as l,r as a,c as t,b as n,w as u,d as o,o as s,e as c,f as i,u as d,F as r,g as p,h as v,t as h,i as b,j as m,k as f,l as _,m as g}from"./vendor.cd0d86a0.js";const y=b();e("data-v-787dccab");const k=m("减少机关"),V=m("增加机关"),U=m("求解"),j={key:0,class:"action"},w=i("i",{class:"el-icon-bottom"},null,-1);l();const E={setup(e){const l=a({type:"rotate",method:"neighbor"}),b=t((()=>"rotate"==l.type?4:3)),m=t((()=>{switch(l.type){case"rotate":return[{label:"正",value:0},{label:"左",value:1},{label:"背",value:2},{label:"右",value:3}];case"count":return[{label:"一",value:1},{label:"二",value:2},{label:"三",value:0}]}}));class f{constructor(){this.state=0,this.connection=[]}static action(e,a){let t=e.split("").map((e=>parseInt(e))),n=[a];switch(l.method){case"neighbor":a-1>=0&&n.push(a-1),a+1<t.length&&n.push(a+1);break;case"neighbor_loop":n.push((a-1+t.length)%t.length),n.push((a+1)%t.length);break;case"custom":_.value[a].connection.forEach((e=>n.push(e)))}return n.forEach((e=>t[e]=(t[e]+1)%b.value)),t.join("")}}const _=n(Array.from({length:3},(()=>new f))),g=n(null);function E(){let e={},l=[_.value.map((e=>e.state)).join("")];for(e[l[0]]={};l.length;){let a=l.shift();if(a.split("").every((e=>0==e))){let l=e=>e.split("").map((e=>m.value[e].label)).join(""),t=[],n=null;for(;a;){let{action:u,prev:o}=e[a];t.unshift({label:l(a),action:n}),n=u,a=o}return t[t.length-1].done=!0,void(g.value=t)}for(let t=0;t<_.value.length;++t){let n=f.action(a,t);void 0===e[n]&&(e[n]={prev:a,action:t},l.push(n))}}console.log(e),g.value=!1}return u((()=>l.type),(()=>_.value.forEach((e=>e.state=0)))),u((()=>_.value.length),(()=>{_.value.forEach((e=>{let l=0;for(;l<e.connection.length;)e.connection[l]>=_.value.length?e.connection.splice(l,1):l+=1}))})),(e,a)=>{const t=o("el-option"),n=o("el-select"),u=o("el-form-item"),b=o("el-form"),C=o("el-button"),I=o("el-divider"),z=o("el-result"),A=o("el-card"),F=o("el-space");return s(),c(r,null,[i(b,{inline:""},{default:y((()=>[i(u,{label:"机关类型"},{default:y((()=>[i(n,{modelValue:d(l).type,"onUpdate:modelValue":a[1]||(a[1]=e=>d(l).type=e)},{default:y((()=>[i(t,{label:"旋转方块",value:"rotate"}),i(t,{label:"花瓣数量",value:"count"})])),_:1},8,["modelValue"])])),_:1}),i(u,{label:"关联方式"},{default:y((()=>[i(n,{modelValue:d(l).method,"onUpdate:modelValue":a[2]||(a[2]=e=>d(l).method=e)},{default:y((()=>[i(t,{label:"相邻",value:"neighbor"}),i(t,{label:"相邻 - 头尾相连",value:"neighbor_loop"}),i(t,{label:"自定义",value:"custom"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),(s(!0),c(r,null,p(_.value,((e,a)=>(s(),c(b,{key:a,inline:"",class:"unit-form"},{default:y((()=>[i(u,{label:"机关 "+(a+1)},{default:y((()=>[i(n,{modelValue:_.value[a].state,"onUpdate:modelValue":e=>_.value[a].state=e},{default:y((()=>[(s(!0),c(r,null,p(d(m),(({label:e,value:l})=>(s(),c(t,{key:l,value:l,label:e},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"]),"custom"==d(l).method?(s(),c(u,{key:0,label:"关联机关"},{default:y((()=>[i(n,{modelValue:_.value[a].connection,"onUpdate:modelValue":e=>_.value[a].connection=e,multiple:"",placeholder:"请选择",class:"connect-unit"},{default:y((()=>[(s(!0),c(r,null,p(_.value,((e,l)=>(s(),c(r,null,[a!=l?(s(),c(t,{key:l,value:l,label:"机关 "+(l+1)},null,8,["value","label"])):v("",!0)],64)))),256))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)):v("",!0)])),_:2},1024)))),128)),i(C,{onClick:a[3]||(a[3]=e=>_.value.pop()),icon:"el-icon-minus",disabled:_.value.length<=3},{default:y((()=>[k])),_:1},8,["disabled"]),i(C,{onClick:a[4]||(a[4]=e=>_.value.push(new f)),icon:"el-icon-plus"},{default:y((()=>[V])),_:1}),i(C,{type:"primary",onClick:E},{default:y((()=>[U])),_:1}),i(I),!1===g.value?(s(),c(A,{key:0},{default:y((()=>[i(z,{icon:"error",title:"不可解","sub-title":"请检查是否正确输入机关状态"})])),_:1})):v("",!0),(s(!0),c(r,null,p(g.value,((e,l)=>(s(),c(r,{key:l},[i(A,{header:"状态"+(l+1)},{default:y((()=>[i(F,{size:"large"},{default:y((()=>[(s(!0),c(r,null,p(e.label,((l,a)=>(s(),c("span",{key:a,class:[{active:e.action==a,done:e.done},"unit"]},h(l),3)))),128))])),_:2},1024)])),_:2},1032,["header"]),null!=e.action?(s(),c("div",j,[w,i("span",null,"激活 机关 "+h(e.action+1),1)])):v("",!0)],64)))),128))],64)}},__scopeId:"data-v-787dccab"};const C=i("h1",null,"岩脊解码器",-1),I=i("span",null,"原神 · 稻妻 · 方块机关解码器",-1);_({setup:e=>(e,l)=>{const a=o("el-header"),t=o("el-main"),n=o("el-container");return s(),c(n,null,{default:f((()=>[i(a,{class:"header"},{default:f((()=>[C,I])),_:1}),i(t,null,{default:f((()=>[i(E)])),_:1})])),_:1})}}).use(g).mount("#app");
